{"version":3,"sources":["../../../src/utils/webpack/formatWebpackMessages.js"],"names":["friendlySyntaxErrorLabel","isLikelyASyntaxError","message","includes","formatMessage","isError","lines","split","length","splice","substr","lastIndexOf","filter","line","indexOf","join","replace","exportError","match","trim","formatWebpackMessages","json","formattedErrors","errors","map","formattedWarnings","warnings","result","some","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// WARNING: this code is untranspiled and is used in browser too.\n// Please make sure any changes are in ES5 or contribute a Babel compile step.\n\n// Some custom utilities to prettify Webpack output.\n// This is quite hacky and hopefully won't be needed when Webpack fixes this.\n// https://github.com/webpack/webpack/issues/2878\n\nconst friendlySyntaxErrorLabel = 'Syntax error:';\n\nfunction isLikelyASyntaxError(message) {\n  return message.includes(friendlySyntaxErrorLabel);\n}\n\n// Cleans up webpack error messages.\n// eslint-disable-next-line no-unused-vars\nfunction formatMessage(message, isError) {\n  let lines = message.split('\\n');\n\n  if (lines.length > 2 && lines[1] === '') {\n    // Remove extra newline.\n    lines.splice(1, 1);\n  }\n\n  // Remove webpack-specific loader notation from filename.\n  // Before:\n  // ./~/css-loader!./~/postcss-loader!./src/App.css\n  // After:\n  // ./src/App.css\n  if (lines[0].includes('!')) {\n    lines[0] = lines[0].substr(lines[0].lastIndexOf('!') + 1);\n  }\n\n  lines = lines.filter(line => {\n    // Webpack adds a list of entry points to warning messages:\n    //  @ ./src/index.js\n    //  @ multi react-scripts/~/react-dev-utils/webpackHotDevClient.js ...\n    // It is misleading (and unrelated to the warnings) so we clean it up.\n    // It is only useful for syntax errors but we have beautiful frames for them.\n    return line.indexOf(' @ ') !== 0;\n  });\n\n  // line #0 is filename\n  // line #1 is the main error message\n  if (!lines[0] || !lines[1]) {\n    return lines.join('\\n');\n  }\n\n  // Cleans up verbose \"module not found\" messages for files and packages.\n  if (lines[1].indexOf('Module not found: ') === 0) {\n    lines = [\n      lines[0],\n      // Clean up message because \"Module not found: \" is descriptive enough.\n      lines[1]\n        .replace(\"Cannot resolve 'file' or 'directory' \", '')\n        .replace('Cannot resolve module ', '')\n        .replace('Error: ', '')\n        .replace('[CaseSensitivePathsPlugin] ', ''),\n    ];\n  }\n\n  // Cleans up syntax error messages.\n  if (lines[1].indexOf('Module build failed: ') === 0) {\n    lines[1] = lines[1].replace(\n      'Module build failed: SyntaxError:',\n      friendlySyntaxErrorLabel,\n    );\n  }\n\n  // Clean up export errors.\n  // TODO: we should really send a PR to Webpack for this.\n  const exportError = /\\s*(.+?)\\s*(\")?export '(.+?)' was not found in '(.+?)'/;\n  if (lines[1].match(exportError)) {\n    lines[1] = lines[1].replace(\n      exportError,\n      \"$1 '$4' does not contain an export named '$3'.\",\n    );\n  }\n\n  // Reassemble the message.\n  message = lines.join('\\n');\n  // Internal stacks are generally useless so we strip them... with the\n  // exception of stacks containing `webpack:` because they're normally\n  // from user code generated by WebPack. For more information see\n  // https://github.com/facebookincubator/create-react-app/pull/1050\n  message = message.replace(\n    /^\\s*at\\s((?!webpack:).)*:\\d+:\\d+[\\s)]*(\\n|$)/gm,\n    '',\n  ); // at ... ...:x:y\n\n  return message.trim();\n}\n\nfunction formatWebpackMessages(json) {\n  const formattedErrors = json.errors.map(message => {\n    return formatMessage(message, true);\n  });\n  const formattedWarnings = json.warnings.map(message => {\n    return formatMessage(message, false);\n  });\n  const result = {\n    errors: formattedErrors,\n    warnings: formattedWarnings,\n  };\n  if (result.errors.some(isLikelyASyntaxError)) {\n    // If there are any syntax errors, show just them.\n    // This prevents a confusing ESLint parsing error\n    // preceding a much more useful Babel syntax error.\n    result.errors = result.errors.filter(isLikelyASyntaxError);\n  }\n  return result;\n}\n\nmodule.exports = formatWebpackMessages;\n"],"file":"formatWebpackMessages.js"}